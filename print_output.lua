-- Print by Luahscript. Its very NB!
function main() print("=== Lua 语法测试开始 ===\n") print("1. 变量和基本数据类型") local num=42 local str="Hello" local bool=true local nilVar=nil local func=function() return "function" end print("数字:",num) print("字符串:",str) print("布尔值:",bool) print("nil:",nilVar) print("函数调用:",func()) print() print("2. 表（Table）") local table1={1,2,3,4} local table2={name="Lua",version="5.4",isCool=true} print("数组表:") for i,v in ipairs(table1) do print(i,v) end print("字典表:") for k,v in pairs(table2) do print(k,v) end print() print("3. 控制结构") local x=5 if x>5 then print("x 大于 5") elseif x==5 then print("x 等于 5") else print("x 小于 5") end print("while 循环:") local i=1 while i<=3 do print("循环次数:",i) i=i+1 end print("repeat until 循环:") local j=1 repeat print("循环次数:",j) j=j+1 until j>3 print("for 循环:") for k=1,5,2 do print("k =",k) end print() print("4. 函数") function add(a,b) return a+b end function sum(...) local result=0 local args={...} for _,v in ipairs(args) do result=result+v end return result end local multiply=function(a,b) return a*b end print("add(5, 3) =",add(5,3)) print("sum(1, 2, 3, 4) =",sum(1,2,3,4)) print("multiply(4, 5) =",multiply(4,5)) print() print("5. 元表和元方法") local t1={value=10} local t2={value=20} local mt={__add=function(a,b) return {value=a.value+b.value} end,__tostring=function(t) return "value: "..t.value end} setmetatable(t1,mt) setmetatable(t2,mt) local t3=t1+t2 local abab="{" for k,v in pairs(t3) do abab=abab..k.."="..v end abab=abab.."}" print("t1 + t2 =",abab) print() print("6. 协程（未完成）") print("7. 错误处理") local success,result=pcall(function() error("这是一个测试错误!") end) if not success then print("捕获到错误:",result) end print("8. 模块系统") local mymodule={} function mymodule.greet(name) return "Hello, "..(name or "World") end print(mymodule.greet("Lua")) print() print("9. 闭包") function createCounter() local count=0 return function() count=count+1 return count end end local counter=createCounter() print("计数器:",counter()) print("计数器:",counter()) print("计数器:",counter()) print() print("10. 字符串操作") local s="Lua Programming" print("字符串长度:",#s) print("大写:",string.upper(s)) print("小写:",string.lower(s)) print("子字符串:",string.sub(s,5,7)) print("查找 'Pro':",string.find(s,"Pro")) print() print("11. 数学运算") print("绝对值:",math.abs(-10)) print("平方根:",math.sqrt(16)) print("随机数:",math.random()) print("π的值:",math.pi) print() print("12. 表操作（未完成）") print("=== Lua 语法测试完成 ===") end